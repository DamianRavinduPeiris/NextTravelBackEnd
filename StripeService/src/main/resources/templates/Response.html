<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!--Icon.-->
<link href="https://scontent-sin6-4.xx.fbcdn.net/v/t39.30808-1/305665009_507401131389745_3620587329270147401_n.jpg?stp=dst-jpg_p320x320&_nc_cat=103&ccb=1-7&_nc_sid=754033&_nc_eui2=AeHmp4mrxo5AeZY5_vO75y1cWtwozwOFYUJa3CjPA4VhQrSoNOLbrxd5rJs6svH34fv_Z0LIzPM88JgcHqfXbJAt&_nc_ohc=xV3-CM-ZzNwAX841dJs&_nc_oc=AQkOk_mPmQi-xAffuB00MViMAUqouQGsN03pn6cUVJLox2rgIUOTcNkGzKeOci7Q3RU&_nc_ht=scontent-sin6-4.xx&oh=00_AfAyBVEVfQ3RloRULOLUd_eUcgoKbo80RxRN9WH3EKXTTA&oe=6527614B"
      rel="icon" type="image/x-icon">
<!--Description.-->
<meta content="Website for the NextTravel PVT LTD." property="og:description">
<!--Keywords.-->
<meta content="Next Travel, Travelling, Book Travels, Trips, Hotels "
      name="keywords">
<!--Author.-->
<meta content="Damian Peiris." name="author">
<!--Viewport.-->
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<!--Bootstrap 5.-->
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" rel="stylesheet">
<script crossorigin="anonymous"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<!--AOS - Animate on scroll library.(CCS.)(https://github.com/michalsnik/aos) or (https://michalsnik.github.io/aos/)-->
<link href="https://unpkg.com/aos@next/dist/aos.css" rel="stylesheet"/>
<link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&family=Tilt+Warp&display=swap"
      rel="stylesheet">
<!--JQuery.-->
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<!--Axios.-->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>



<head>
    <meta charset="UTF-8">
    <title>Payment Receipt.</title>
    <style>

        .flexBox{
            margin-top: 5rem;
            display: flex;
            justify-content: center;
            align-content: center;
            flex-direction: column;
            align-items: center;

        }
        .text{
            text-align: center;
            font-family: Tilt Warp,serif;
        }
        #pID,#date,#email,#chargeID,#amount{
            width: 30vw;
        }
        h3{
            margin-top: 2rem;
        }

    </style>
</head>
<body>
<div class="flexBox">
    <h1 class="text">Payment Report.</h1>

    <div class="mb-3">
        <label for="date" class="form-label">Date.</label>
        <input type="text" class="form-control" id="date" placeholder="" disabled th:value="${date}">
    </div>
    <div class="mb-3">
        <label for="pID" class="form-label">Payment ID.</label>
        <input type="text" class="form-control" id="pID" placeholder="" disabled th:value="${id}">
    </div>
    <div class="mb-3">
        <label for="amount" class="form-label">Amount in LKR.</label>
        <input type="text" class="form-control" id="amount" placeholder="" disabled th:value="${amount}">
    </div>
    <div class="mb-3">
        <label for="email" class="form-label">Email.</label>
        <input type="email" class="form-control" id="email" placeholder="" disabled th:value="${email}">
    </div>
    <div class="mb-3">
        <label for="chargeID" class="form-label">Charge ID.</label>
        <input type="text" class="form-control" id="chargeID" placeholder="" disabled th:value="${chargeId}">
    </div>


    <h3 class="text">Thank your for your payment!</h3>



</div>


<script >
    $(document).ready(()=>{
        let auth ={

            "Authorization" : "Bearer "+JSON.parse(localStorage.getItem("userAuthToken"))
        }
        let pd = JSON.parse(localStorage.getItem("packageDetails"))
        var amount = JSON.parse(localStorage.getItem("amount"));
        pd.paidValue = parseInt(amount);

        axios.post("http://localhost:8087/savePackageDetails",pd,{headers:auth})
            .then((res)=>{
                console.log(res.data)
                if(res.data.statusCode === 201){
                    showConfetti();
                    return swal("Success", "Payment successfull, Check your Mailbox!", "success");

                }


            })
            .catch((er)=>{
                console.log(er.responseJSON.message)
                return swal("OOPS!", "Server threw an exception : " + er.responseJSON.message, "error");

            })



    })

    function showConfetti(){
        const count = 200,
            defaults = {
                origin: { y: 0.7 },
            };

        function fire(particleRatio, opts) {
            confetti(
                Object.assign({}, defaults, opts, {
                    particleCount: Math.floor(count * particleRatio),
                })
            );
        }

        fire(0.25, {
            spread: 26,
            startVelocity: 55,
        });

        fire(0.2, {
            spread: 60,
        });

        fire(0.35, {
            spread: 100,
            decay: 0.91,
            scalar: 0.8,
        });

        fire(0.1, {
            spread: 120,
            startVelocity: 25,
            decay: 0.92,
            scalar: 1.2,
        });

        fire(0.1, {
            spread: 120,
            startVelocity: 45,
        });
    }

</script>
<!--Confetti JS.-->
<script src="https://cdn.jsdelivr.net/npm/tsparticles-confetti@2.12.0/tsparticles.confetti.bundle.min.js"></script>

</body>
</html>